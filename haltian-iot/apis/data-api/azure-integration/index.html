<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Azure Integration | Haltian Developer Documentation</title><meta name=description content="Native Azure integration for importing Parquet files from AWS S3"><meta property="og:url" content="https://developer.haltian.io/haltian-iot/apis/data-api/azure-integration/"><meta property="og:site_name" content="Haltian Developer Documentation"><meta property="og:title" content="Azure Integration"><meta property="og:description" content="Native Azure integration for importing Parquet files from AWS S3"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="haltian-iot"><meta property="article:modified_time" content="2026-01-28T16:48:29+02:00"><meta itemprop=name content="Azure Integration"><meta itemprop=description content="Native Azure integration for importing Parquet files from AWS S3"><meta itemprop=dateModified content="2026-01-28T16:48:29+02:00"><meta itemprop=wordCount content="742"><meta name=twitter:card content="summary"><meta name=twitter:title content="Azure Integration"><meta name=twitter:description content="Native Azure integration for importing Parquet files from AWS S3"><link rel=preload href=/scss/main.min.d423c29d9765e7fa2af46a8f6237583add283e9337882d1b1c18b860d9bf357b.css as=style integrity="sha256-1CPCnZdl5/oq9GqPYjdYOt0oPpM3iC0bHBi4YNm/NXs=" crossorigin=anonymous><link href=/scss/main.min.d423c29d9765e7fa2af46a8f6237583add283e9337882d1b1c18b860d9bf357b.css rel=stylesheet integrity="sha256-1CPCnZdl5/oq9GqPYjdYOt0oPpM3iC0bHBi4YNm/NXs=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar navbar navbar-expand-lg navbar-dark bg-primary"><div class=container-fluid><a class=navbar-brand href=/><img src=https://developer.haltian.io/logo.png alt="Haltian Developer Documentation" height=28 class="d-inline-block align-top">
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNav><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/haltian-iot/>Haltian IoT</a></li><li class=nav-item><a class=nav-link href=/thingsee-iot/>Thingsee IoT</a></li><li class=nav-item><a class=nav-link href=/devices/>Devices</a></li><li class=nav-item><a class=nav-link href=/faq/>FAQ</a></li></ul><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.00fa5d2135fb7948f0b1ab0185774bd9.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><script>$(function(){$("#td-section-nav a").removeClass("active"),$("#td-section-nav #m-haltian-iotapisdata-apiazure-integration").addClass("active"),$("#td-section-nav #m-haltian-iotapisdata-apiazure-integration-li span").addClass("td-sidebar-nav-active-item"),$("#td-section-nav #m-haltian-iotapisdata-apiazure-integration").parents("li").addClass("active-path"),$("#td-section-nav li.active-path").addClass("show"),$("#td-section-nav li.active-path").children("input").prop("checked",!0),$("#td-section-nav #m-haltian-iotapisdata-apiazure-integration-li").siblings("li").addClass("show"),$("#td-section-nav #m-haltian-iotapisdata-apiazure-integration-li").children("ul").children("li").addClass("show"),$("#td-sidebar-menu").toggleClass("d-none")})</script><div id=td-sidebar-menu class="td-sidebar__inner d-none"><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.00fa5d2135fb7948f0b1ab0185774bd9.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iot-li><a href=/haltian-iot/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-haltian-iot><span>Haltian IoT</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotgetting-started-li><input type=checkbox id=m-haltian-iotgetting-started-check>
<label for=m-haltian-iotgetting-started-check><a href=/haltian-iot/getting-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotgetting-started><span>Getting Started</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotgetting-startedplatform-overview-li><input type=checkbox id=m-haltian-iotgetting-startedplatform-overview-check>
<label for=m-haltian-iotgetting-startedplatform-overview-check><a href=/haltian-iot/getting-started/platform-overview/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotgetting-startedplatform-overview><span>Platform Overview</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotconcepts-li><input type=checkbox id=m-haltian-iotconcepts-check>
<label for=m-haltian-iotconcepts-check><a href=/haltian-iot/concepts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotconcepts><span>Concepts</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotconceptsroles-and-access-li><input type=checkbox id=m-haltian-iotconceptsroles-and-access-check>
<label for=m-haltian-iotconceptsroles-and-access-check><a href=/haltian-iot/concepts/roles-and-access/ title="Roles and Access Management" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotconceptsroles-and-access><span>Roles & Access</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotconceptsglossary-li><input type=checkbox id=m-haltian-iotconceptsglossary-check>
<label for=m-haltian-iotconceptsglossary-check><a href=/haltian-iot/concepts/glossary/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotconceptsglossary><span>Glossary</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapis-li><input type=checkbox id=m-haltian-iotapis-check>
<label for=m-haltian-iotapis-check><a href=/haltian-iot/apis/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapis><span>APIs</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapisservice-api-li><input type=checkbox id=m-haltian-iotapisservice-api-check>
<label for=m-haltian-iotapisservice-api-check><a href=/haltian-iot/apis/service-api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapisservice-api><span>Service API</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisservice-apiauthentication-li><input type=checkbox id=m-haltian-iotapisservice-apiauthentication-check>
<label for=m-haltian-iotapisservice-apiauthentication-check><a href=/haltian-iot/apis/service-api/authentication/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisservice-apiauthentication><span>Authentication</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisservice-apiqueries-li><input type=checkbox id=m-haltian-iotapisservice-apiqueries-check>
<label for=m-haltian-iotapisservice-apiqueries-check><a href=/haltian-iot/apis/service-api/queries/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisservice-apiqueries><span>Queries</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisservice-apimutations-li><input type=checkbox id=m-haltian-iotapisservice-apimutations-check>
<label for=m-haltian-iotapisservice-apimutations-check><a href=/haltian-iot/apis/service-api/mutations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisservice-apimutations><span>Mutations</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapisstream-api-li><input type=checkbox id=m-haltian-iotapisstream-api-check>
<label for=m-haltian-iotapisstream-api-check><a href=/haltian-iot/apis/stream-api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapisstream-api><span>Stream API</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisstream-apitopics-li><input type=checkbox id=m-haltian-iotapisstream-apitopics-check>
<label for=m-haltian-iotapisstream-apitopics-check><a href=/haltian-iot/apis/stream-api/topics/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisstream-apitopics><span>Topics</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisstream-apiexamples-li><input type=checkbox id=m-haltian-iotapisstream-apiexamples-check>
<label for=m-haltian-iotapisstream-apiexamples-check><a href=/haltian-iot/apis/stream-api/examples/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisstream-apiexamples><span>Examples</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisstream-apicloud-binary-passthrough-li><input type=checkbox id=m-haltian-iotapisstream-apicloud-binary-passthrough-check>
<label for=m-haltian-iotapisstream-apicloud-binary-passthrough-check><a href=/haltian-iot/apis/stream-api/cloud-binary-passthrough/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisstream-apicloud-binary-passthrough><span>Cloud Binary Passthrough</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapisdata-api-li><input type=checkbox id=m-haltian-iotapisdata-api-check>
<label for=m-haltian-iotapisdata-api-check><a href=/haltian-iot/apis/data-api/ title="Data API (Parquet)" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapisdata-api><span>Data API</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apifolder-structure-li><input type=checkbox id=m-haltian-iotapisdata-apifolder-structure-check>
<label for=m-haltian-iotapisdata-apifolder-structure-check><a href=/haltian-iot/apis/data-api/folder-structure/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apifolder-structure><span>Folder Structure</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apischema-reference-li><input type=checkbox id=m-haltian-iotapisdata-apischema-reference-check>
<label for=m-haltian-iotapisdata-apischema-reference-check><a href=/haltian-iot/apis/data-api/schema-reference/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apischema-reference><span>Schema Reference</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apiintegration-examples-li><input type=checkbox id=m-haltian-iotapisdata-apiintegration-examples-check>
<label for=m-haltian-iotapisdata-apiintegration-examples-check><a href=/haltian-iot/apis/data-api/integration-examples/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apiintegration-examples><span>Integration Examples</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apiazure-integration-li><input type=checkbox id=m-haltian-iotapisdata-apiazure-integration-check>
<label for=m-haltian-iotapisdata-apiazure-integration-check><a href=/haltian-iot/apis/data-api/azure-integration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apiazure-integration><span>Azure Integration</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapplications-li><input type=checkbox id=m-haltian-iotapplications-check>
<label for=m-haltian-iotapplications-check><a href=/haltian-iot/applications/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapplications><span>Applications</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapplicationsiot-studio-li><input type=checkbox id=m-haltian-iotapplicationsiot-studio-check>
<label for=m-haltian-iotapplicationsiot-studio-check><a href=/haltian-iot/applications/iot-studio/ title="Haltian IoT Studio" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapplicationsiot-studio><span>IoT Studio</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotguides-li><input type=checkbox id=m-haltian-iotguides-check>
<label for=m-haltian-iotguides-check><a href=/haltian-iot/guides/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotguides><span>Guides</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesmqtt-subscription-li><input type=checkbox id=m-haltian-iotguidesmqtt-subscription-check>
<label for=m-haltian-iotguidesmqtt-subscription-check><a href=/haltian-iot/guides/mqtt-subscription/ title="Subscribe to MQTT Data Stream" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesmqtt-subscription><span>MQTT Subscription</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesqr-code-identification-li><input type=checkbox id=m-haltian-iotguidesqr-code-identification-check>
<label for=m-haltian-iotguidesqr-code-identification-check><a href=/haltian-iot/guides/qr-code-identification/ title="Identify Device by QR Code" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesqr-code-identification><span>QR Code Identification</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesoccupancy-data-li><input type=checkbox id=m-haltian-iotguidesoccupancy-data-check>
<label for=m-haltian-iotguidesoccupancy-data-check><a href=/haltian-iot/guides/occupancy-data/ title="Working with Occupancy Data" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesoccupancy-data><span>Occupancy Data</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesposition-data-li><input type=checkbox id=m-haltian-iotguidesposition-data-check>
<label for=m-haltian-iotguidesposition-data-check><a href=/haltian-iot/guides/position-data/ title="Position Data Best Practices" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesposition-data><span>Position Data</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesmeasurement-types-li><input type=checkbox id=m-haltian-iotguidesmeasurement-types-check>
<label for=m-haltian-iotguidesmeasurement-types-check><a href=/haltian-iot/guides/measurement-types/ title="Measurement Types Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesmeasurement-types><span>Measurement Types</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotintegrations-li><input type=checkbox id=m-haltian-iotintegrations-check>
<label for=m-haltian-iotintegrations-check><a href=/haltian-iot/integrations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotintegrations><span>Integrations</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotintegrationsmicrosoft-places-li><input type=checkbox id=m-haltian-iotintegrationsmicrosoft-places-check>
<label for=m-haltian-iotintegrationsmicrosoft-places-check><a href=/haltian-iot/integrations/microsoft-places/ title="Microsoft Places Integration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotintegrationsmicrosoft-places><span>Microsoft Places</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotintegrationsthingsboard-li><input type=checkbox id=m-haltian-iotintegrationsthingsboard-check>
<label for=m-haltian-iotintegrationsthingsboard-check><a href=/haltian-iot/integrations/thingsboard/ title="ThingsBoard Integration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotintegrationsthingsboard><span>ThingsBoard</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotreference-li><input type=checkbox id=m-haltian-iotreference-check>
<label for=m-haltian-iotreference-check><a href=/haltian-iot/reference/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotreference><span>Reference</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text>On this page</span>
<a class=td-toc-title__link title="Top of page" href=#></a></div><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#destination-options>Destination Options</a></li><li><a href=#prerequisites>Prerequisites</a><ul><li><a href=#required>Required</a></li><li><a href=#for-onelake-destination>For OneLake Destination</a></li><li><a href=#for-storage-account-destination>For Storage Account Destination</a></li><li><a href=#optional-for-development>Optional (for development)</a></li></ul></li><li><a href=#s3-access-credentials>S3 Access Credentials</a></li><li><a href=#infrastructure-setup>Infrastructure Setup</a><ul><li><a href=#terraform-modules>Terraform Modules</a></li></ul></li><li><a href=#deployment-steps>Deployment Steps</a><ul><li><a href=#option-a-onelake-destination>Option A: OneLake Destination</a></li><li><a href=#option-b-storage-account-destination>Option B: Storage Account Destination</a></li></ul></li><li><a href=#configuration-reference>Configuration Reference</a><ul><li><a href=#azure-function-variables>Azure Function Variables</a></li><li><a href=#onelake-specific-variables>OneLake-Specific Variables</a></li><li><a href=#storage-account-variables>Storage Account Variables</a></li></ul></li><li><a href=#data-flow>Data Flow</a></li><li><a href=#verification>Verification</a></li><li><a href=#cleanup>Cleanup</a></li><li><a href=#next-steps>Next Steps</a></li><li><a href=#troubleshooting>Troubleshooting</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/haltian-iot/>Haltian IoT</a></li><li class=breadcrumb-item><a href=/haltian-iot/apis/>APIs</a></li><li class=breadcrumb-item><a href=/haltian-iot/apis/data-api/>Data API</a></li><li class="breadcrumb-item active" aria-current=page>Azure Integration</li></ol></nav><div class=td-content><h1>Azure Integration</h1><div class=lead>Native Azure integration for importing Parquet files from AWS S3</div><header class=article-meta></header><p>This guide provides step-by-step instructions for integrating Azure with Haltian IoT to automatically retrieve Parquet files from AWS S3 and upload them to your Azure infrastructure.</p><h2 id=overview>Overview</h2><p>The integration uses an Azure Function App to:</p><ol><li>List and retrieve new Parquet files from the Haltian IoT S3 bucket</li><li>Authenticate using Microsoft Entra ID (Azure AD)</li><li>Upload files to your chosen destination</li></ol><pre class=mermaid>%%{init: {&#39;theme&#39;: &#39;base&#39;, &#39;themeVariables&#39;: { &#39;primaryColor&#39;: &#39;#73F9C1&#39;, &#39;primaryTextColor&#39;: &#39;#143633&#39;, &#39;primaryBorderColor&#39;: &#39;#143633&#39;, &#39;lineColor&#39;: &#39;#143633&#39;, &#39;secondaryColor&#39;: &#39;#F6FAFA&#39;, &#39;tertiaryColor&#39;: &#39;#ffffff&#39;, &#39;background&#39;: &#39;#ffffff&#39;, &#39;mainBkg&#39;: &#39;#73F9C1&#39;, &#39;secondBkg&#39;: &#39;#F6FAFA&#39; }}}%%
flowchart TB
    subgraph &#34;Haltian IoT&#34;
        S3[&#34;AWS S3 Bucket&lt;br/&gt;&lt;i&gt;Parquet Files&lt;/i&gt;&#34;]
    end
    
    subgraph &#34;Customer Azure&#34;
        FUNC[&#34;Azure Function App&lt;br/&gt;&lt;i&gt;Scheduled Transfer&lt;/i&gt;&#34;]
        
        subgraph &#34;Destination Options&#34;
            ONELAKE[&#34;Microsoft Fabric&lt;br/&gt;&lt;i&gt;OneLake&lt;/i&gt;&#34;]
            STORAGE[&#34;Azure Storage Account&lt;br/&gt;&lt;i&gt;Blob Storage&lt;/i&gt;&#34;]
        end
    end
    
    S3 --&gt;|&#34;List &amp; Get Objects&#34;| FUNC
    FUNC --&gt;|&#34;DFS API&#34;| ONELAKE
    FUNC --&gt;|&#34;Blob Service&#34;| STORAGE</pre><h2 id=destination-options>Destination Options</h2><p>Choose the destination that fits your analytics infrastructure:</p><table><thead><tr><th>Option</th><th>Best For</th><th>Features</th></tr></thead><tbody><tr><td><strong>Microsoft Fabric OneLake</strong></td><td>Enterprise analytics, Power BI</td><td>Unified lakehouse, built-in analytics</td></tr><tr><td><strong>Azure Storage Account</strong></td><td>Custom pipelines, flexibility</td><td>Lower cost, broad compatibility</td></tr></tbody></table><h2 id=prerequisites>Prerequisites</h2><p>Before starting, ensure you have:</p><h3 id=required>Required</h3><ul><li><strong>Terraform</strong> (≥ 1.5.0)</li><li><strong>Azure CLI</strong> (<code>az</code>) installed and authenticated</li><li><strong>Azure subscription</strong> with permissions to create resource groups</li><li><strong>IAM credentials</strong> from Haltian for S3 bucket access</li></ul><h3 id=for-onelake-destination>For OneLake Destination</h3><ul><li>Microsoft Fabric capacity (existing or new)</li><li>Global Administrator access for AAD permissions</li></ul><h3 id=for-storage-account-destination>For Storage Account Destination</h3><ul><li>Storage Account Contributor permissions</li></ul><h3 id=optional-for-development>Optional (for development)</h3><ul><li>Python 3.10+</li><li>Azure Functions Core Tools</li></ul><h2 id=s3-access-credentials>S3 Access Credentials</h2><p>Haltian provides two options for S3 bucket access:</p><table><thead><tr><th>Method</th><th>Setup</th><th>Best For</th></tr></thead><tbody><tr><td><strong>Access Key + Secret</strong></td><td>Haltian provides credentials</td><td>Quick setup</td></tr><tr><td><strong>Bring-your-own IAM Role</strong></td><td>You provide ARN to Haltian</td><td>Enterprise security policies</td></tr></tbody></table><div class="alert alert-primary" role=alert><div class="h4 alert-heading" role=heading>IAM Role Option</div><p>If using your own IAM role, you&rsquo;ll need to modify the Python code in the Azure Function to use AWS IAM role authentication, and provide the role ARN to Haltian for bucket policy configuration.</p></div><h2 id=infrastructure-setup>Infrastructure Setup</h2><div class="alert alert-warning" role=alert><div class="h4 alert-heading" role=heading>Cost Notice</div><p>All costs for Azure resources (resource groups, storage accounts, Function Apps, Fabric capacity) are your responsibility. Review potential charges before proceeding.</p></div><h3 id=terraform-modules>Terraform Modules</h3><p>The integration uses these Terraform modules:</p><table><thead><tr><th>Module</th><th>Purpose</th></tr></thead><tbody><tr><td><code>azure-function/terraform</code></td><td>Azure Function App with dual upload modes</td></tr><tr><td><code>infra/onelake</code></td><td>Fabric Capacity, Workspace, Lakehouse, AAD app</td></tr><tr><td><code>infra/storageaccount</code></td><td>Storage Account with data containers</td></tr></tbody></table><h2 id=deployment-steps>Deployment Steps</h2><h3 id=option-a-onelake-destination>Option A: OneLake Destination</h3><ol><li><p><strong>Deploy infrastructure</strong></p><p>Navigate to the <code>infra/onelake</code> module and configure:</p><ul><li>Azure subscription and tenant</li><li>Resource group naming</li><li>Fabric capacity (create new or use existing)</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> infra/onelake
</span></span><span style=display:flex><span>terraform init
</span></span><span style=display:flex><span>terraform plan
</span></span><span style=display:flex><span>terraform apply
</span></span></code></pre></div></li><li><p><strong>Deploy Function App</strong></p><p>Configure the <code>azure-function/terraform</code> module with:</p><ul><li>S3 credentials (from Haltian)</li><li>Fabric/OneLake credentials</li><li>Upload mode: <code>onelake</code></li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> azure-function/terraform
</span></span><span style=display:flex><span>terraform init
</span></span><span style=display:flex><span>terraform plan
</span></span><span style=display:flex><span>terraform apply
</span></span></code></pre></div></li></ol><h3 id=option-b-storage-account-destination>Option B: Storage Account Destination</h3><ol><li><p><strong>Deploy infrastructure</strong></p><p>Navigate to the <code>infra/storageaccount</code> module:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> infra/storageaccount
</span></span><span style=display:flex><span>terraform init
</span></span><span style=display:flex><span>terraform plan
</span></span><span style=display:flex><span>terraform apply
</span></span></code></pre></div></li><li><p><strong>Deploy Function App</strong></p><p>Configure with upload mode: <code>storage_account</code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> azure-function/terraform
</span></span><span style=display:flex><span>terraform init
</span></span><span style=display:flex><span>terraform plan
</span></span><span style=display:flex><span>terraform apply
</span></span></code></pre></div></li></ol><h2 id=configuration-reference>Configuration Reference</h2><h3 id=azure-function-variables>Azure Function Variables</h3><table><thead><tr><th>Variable</th><th>Description</th><th style=text-align:center>Required</th></tr></thead><tbody><tr><td><code>s3_bucket_name</code></td><td>Haltian S3 bucket name</td><td style=text-align:center>✓</td></tr><tr><td><code>s3_access_key</code></td><td>AWS access key (from Haltian)</td><td style=text-align:center>✓</td></tr><tr><td><code>s3_secret_key</code></td><td>AWS secret key (from Haltian)</td><td style=text-align:center>✓</td></tr><tr><td><code>s3_region</code></td><td>S3 bucket region</td><td style=text-align:center>✓</td></tr><tr><td><code>upload_mode</code></td><td><code>onelake</code> or <code>storage_account</code></td><td style=text-align:center>✓</td></tr><tr><td><code>organization_id</code></td><td>Your Haltian organization UUID</td><td style=text-align:center>✓</td></tr></tbody></table><h3 id=onelake-specific-variables>OneLake-Specific Variables</h3><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>fabric_workspace_id</code></td><td>Fabric workspace GUID</td></tr><tr><td><code>fabric_lakehouse_id</code></td><td>Lakehouse GUID</td></tr><tr><td><code>aad_client_id</code></td><td>Azure AD app client ID</td></tr><tr><td><code>aad_client_secret</code></td><td>Azure AD app secret</td></tr><tr><td><code>aad_tenant_id</code></td><td>Azure AD tenant ID</td></tr></tbody></table><h3 id=storage-account-variables>Storage Account Variables</h3><table><thead><tr><th>Variable</th><th>Description</th></tr></thead><tbody><tr><td><code>storage_account_name</code></td><td>Target storage account</td></tr><tr><td><code>storage_container_name</code></td><td>Container for Parquet files</td></tr><tr><td><code>storage_connection_string</code></td><td>Connection string</td></tr></tbody></table><h2 id=data-flow>Data Flow</h2><p>Once deployed, the Azure Function runs on a schedule (configurable, default: hourly):</p><ol><li><strong>List Objects</strong> - Queries S3 for new Parquet files since last run</li><li><strong>Download</strong> - Retrieves each new file from S3</li><li><strong>Authenticate</strong> - Uses MSAL client credentials for Azure auth</li><li><strong>Upload</strong> - Transfers to OneLake (DFS API) or Storage Account (Blob API)</li><li><strong>Track Progress</strong> - Records last processed timestamp</li></ol><h2 id=verification>Verification</h2><p>After deployment, verify the integration:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check Function App status</span>
</span></span><span style=display:flex><span>az functionapp show --name &lt;<span style=color:#204a87;font-weight:700>function</span>-app-name&gt; --resource-group &lt;rg-name&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># View recent executions</span>
</span></span><span style=display:flex><span>az monitor activity-log list --resource-group &lt;rg-name&gt; --offset 1h
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check uploaded files (Storage Account)</span>
</span></span><span style=display:flex><span>az storage blob list --container-name &lt;container&gt; --account-name &lt;account&gt;
</span></span></code></pre></div><p>For OneLake, verify files in the Fabric workspace Lakehouse.</p><h2 id=cleanup>Cleanup</h2><p>To remove all deployed resources:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> azure-function/terraform
</span></span><span style=display:flex><span>terraform destroy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87>cd</span> ../infra/onelake  <span style=color:#8f5902;font-style:italic># or infra/storageaccount</span>
</span></span><span style=display:flex><span>terraform destroy
</span></span></code></pre></div><h2 id=next-steps>Next Steps</h2><p>Once data is flowing to Azure:</p><ul><li><strong>OneLake</strong>: Create Power BI reports, run Spark notebooks, use SQL analytics</li><li><strong>Storage Account</strong>: Configure Azure Data Factory, Synapse, or Databricks pipelines</li></ul><h2 id=troubleshooting>Troubleshooting</h2><table><thead><tr><th>Issue</th><th>Solution</th></tr></thead><tbody><tr><td>Function not triggering</td><td>Check timer trigger configuration and Function App logs</td></tr><tr><td>S3 access denied</td><td>Verify IAM credentials with Haltian</td></tr><tr><td>OneLake upload fails</td><td>Check AAD app permissions and Fabric workspace access</td></tr><tr><td>Missing files</td><td>Verify organization ID matches your Haltian organization</td></tr></tbody></table></div></main></div></div><footer class="td-footer bg-dark"><div class="container py-4"><div class=row><div class="col-12 col-md-6 text-center text-md-left"><div class=td-footer__left><span class=text-white>&copy; 2026 Haltian |
<a href=https://haltian.com/privacy class=text-white>Privacy Policy</a></span></div></div><div class="col-12 col-md-6 text-center text-md-right"><div class=td-footer__right><a class="text-white mx-2" target=_blank rel=noopener href=mailto:support@haltian.com aria-label="Contact Support"><i class="fa fa-envelope"></i>
</a><a class="text-white mx-2" target=_blank rel=noopener href=https://haltian.com aria-label="Haltian Website"><i class="fa fa-globe"></i>
</a><a class="text-white mx-2" target=_blank rel=noopener href=https://github.com/haltian aria-label=GitHub><i class="fab fa-github"></i></a></div></div></div></div></footer></div><script type=module async>
  import mermaid from "https:\/\/cdn.jsdelivr.net\/npm\/mermaid@latest\/dist\/mermaid.esm.min.mjs";

  (function ($) {
    if ($('.mermaid').length == 0) {
      mermaid.initialize({ startOnLoad: false });
      return;
    }

    var params = {};

    
    
    var norm = function (defaultConfig, params) {
      var result = {};
      for (const key in defaultConfig) {
        const keyLower = key.toLowerCase();
        if (defaultConfig.hasOwnProperty(key) && params.hasOwnProperty(keyLower)) {
          if (typeof defaultConfig[key] === "object") {
            result[key] = norm(defaultConfig[key], params[keyLower]);
          } else {
            result[key] = params[keyLower];
          }
        }
      }
      return result;
    };

    var settings = norm(mermaid.mermaidAPI.defaultConfig, params);
    settings.startOnLoad = true;
    if ($('html[data-bs-theme="dark"]').length) {
      settings.theme = 'dark';
    }
    mermaid.initialize(settings);

    
    const lightDarkModeThemeChangeHandler = function (mutationsList, observer) {
      for (const mutation of mutationsList) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'data-bs-theme') {
          
          
          
          location.reload();
        }
      }
    };

    const observer = new MutationObserver(lightDarkModeThemeChangeHandler);
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ['data-bs-theme']
    });
    

  })(jQuery);
</script><script src=/js/main.min.8dd4d36f10f64ef5224e04ba313f8e91e183feca404406187e7d4bad9bc83b21.js integrity="sha256-jdTTbxD2TvUiTgS6MT+OkeGD/spARAYYfn1LrZvIOyE=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>