<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Cloud Binary Passthrough | Haltian Developer Documentation</title><meta name=description content="Raw binary data passthrough via Haltian IoT Cloud MQTT for third-party Wirepas devices"><meta property="og:url" content="https://developer.haltian.io/haltian-iot/apis/stream-api/cloud-binary-passthrough/"><meta property="og:site_name" content="Haltian Developer Documentation"><meta property="og:title" content="Cloud Binary Passthrough"><meta property="og:description" content="Raw binary data passthrough via Haltian IoT Cloud MQTT for third-party Wirepas devices"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="haltian-iot"><meta property="article:modified_time" content="2026-01-29T12:30:27+02:00"><meta itemprop=name content="Cloud Binary Passthrough"><meta itemprop=description content="Raw binary data passthrough via Haltian IoT Cloud MQTT for third-party Wirepas devices"><meta itemprop=dateModified content="2026-01-29T12:30:27+02:00"><meta itemprop=wordCount content="1058"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cloud Binary Passthrough"><meta name=twitter:description content="Raw binary data passthrough via Haltian IoT Cloud MQTT for third-party Wirepas devices"><link rel=preload href=/scss/main.min.d423c29d9765e7fa2af46a8f6237583add283e9337882d1b1c18b860d9bf357b.css as=style integrity="sha256-1CPCnZdl5/oq9GqPYjdYOt0oPpM3iC0bHBi4YNm/NXs=" crossorigin=anonymous><link href=/scss/main.min.d423c29d9765e7fa2af46a8f6237583add283e9337882d1b1c18b860d9bf357b.css rel=stylesheet integrity="sha256-1CPCnZdl5/oq9GqPYjdYOt0oPpM3iC0bHBi4YNm/NXs=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar navbar navbar-expand-lg navbar-dark bg-primary"><div class=container-fluid><a class=navbar-brand href=/><img src=https://developer.haltian.io/logo.png alt="Haltian Developer Documentation" height=28 class="d-inline-block align-top">
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNav><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/haltian-iot/>Haltian IoT</a></li><li class=nav-item><a class=nav-link href=/thingsee-iot/>Thingsee IoT</a></li><li class=nav-item><a class=nav-link href=/devices/>Devices</a></li><li class=nav-item><a class=nav-link href=/faq/>FAQ</a></li></ul><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.00fa5d2135fb7948f0b1ab0185774bd9.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><script>$(function(){$("#td-section-nav a").removeClass("active"),$("#td-section-nav #m-haltian-iotapisstream-apicloud-binary-passthrough").addClass("active"),$("#td-section-nav #m-haltian-iotapisstream-apicloud-binary-passthrough-li span").addClass("td-sidebar-nav-active-item"),$("#td-section-nav #m-haltian-iotapisstream-apicloud-binary-passthrough").parents("li").addClass("active-path"),$("#td-section-nav li.active-path").addClass("show"),$("#td-section-nav li.active-path").children("input").prop("checked",!0),$("#td-section-nav #m-haltian-iotapisstream-apicloud-binary-passthrough-li").siblings("li").addClass("show"),$("#td-section-nav #m-haltian-iotapisstream-apicloud-binary-passthrough-li").children("ul").children("li").addClass("show"),$("#td-sidebar-menu").toggleClass("d-none")})</script><div id=td-sidebar-menu class="td-sidebar__inner d-none"><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.00fa5d2135fb7948f0b1ab0185774bd9.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iot-li><a href=/haltian-iot/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-haltian-iot><span>Haltian IoT</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotgetting-started-li><input type=checkbox id=m-haltian-iotgetting-started-check>
<label for=m-haltian-iotgetting-started-check><a href=/haltian-iot/getting-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotgetting-started><span>Getting Started</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotgetting-startedplatform-overview-li><input type=checkbox id=m-haltian-iotgetting-startedplatform-overview-check>
<label for=m-haltian-iotgetting-startedplatform-overview-check><a href=/haltian-iot/getting-started/platform-overview/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotgetting-startedplatform-overview><span>Platform Overview</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotconcepts-li><input type=checkbox id=m-haltian-iotconcepts-check>
<label for=m-haltian-iotconcepts-check><a href=/haltian-iot/concepts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotconcepts><span>Concepts</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotconceptsroles-and-access-li><input type=checkbox id=m-haltian-iotconceptsroles-and-access-check>
<label for=m-haltian-iotconceptsroles-and-access-check><a href=/haltian-iot/concepts/roles-and-access/ title="Roles and Access Management" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotconceptsroles-and-access><span>Roles & Access</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotconceptsglossary-li><input type=checkbox id=m-haltian-iotconceptsglossary-check>
<label for=m-haltian-iotconceptsglossary-check><a href=/haltian-iot/concepts/glossary/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotconceptsglossary><span>Glossary</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapis-li><input type=checkbox id=m-haltian-iotapis-check>
<label for=m-haltian-iotapis-check><a href=/haltian-iot/apis/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapis><span>APIs</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapisservice-api-li><input type=checkbox id=m-haltian-iotapisservice-api-check>
<label for=m-haltian-iotapisservice-api-check><a href=/haltian-iot/apis/service-api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapisservice-api><span>Service API</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisservice-apiauthentication-li><input type=checkbox id=m-haltian-iotapisservice-apiauthentication-check>
<label for=m-haltian-iotapisservice-apiauthentication-check><a href=/haltian-iot/apis/service-api/authentication/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisservice-apiauthentication><span>Authentication</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisservice-apiqueries-li><input type=checkbox id=m-haltian-iotapisservice-apiqueries-check>
<label for=m-haltian-iotapisservice-apiqueries-check><a href=/haltian-iot/apis/service-api/queries/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisservice-apiqueries><span>Queries</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisservice-apimutations-li><input type=checkbox id=m-haltian-iotapisservice-apimutations-check>
<label for=m-haltian-iotapisservice-apimutations-check><a href=/haltian-iot/apis/service-api/mutations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisservice-apimutations><span>Mutations</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapisstream-api-li><input type=checkbox id=m-haltian-iotapisstream-api-check>
<label for=m-haltian-iotapisstream-api-check><a href=/haltian-iot/apis/stream-api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapisstream-api><span>Stream API</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisstream-apitopics-li><input type=checkbox id=m-haltian-iotapisstream-apitopics-check>
<label for=m-haltian-iotapisstream-apitopics-check><a href=/haltian-iot/apis/stream-api/topics/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisstream-apitopics><span>Topics</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisstream-apiexamples-li><input type=checkbox id=m-haltian-iotapisstream-apiexamples-check>
<label for=m-haltian-iotapisstream-apiexamples-check><a href=/haltian-iot/apis/stream-api/examples/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisstream-apiexamples><span>Examples</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisstream-apicloud-binary-passthrough-li><input type=checkbox id=m-haltian-iotapisstream-apicloud-binary-passthrough-check>
<label for=m-haltian-iotapisstream-apicloud-binary-passthrough-check><a href=/haltian-iot/apis/stream-api/cloud-binary-passthrough/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisstream-apicloud-binary-passthrough><span>Cloud Binary Passthrough</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapisdata-api-li><input type=checkbox id=m-haltian-iotapisdata-api-check>
<label for=m-haltian-iotapisdata-api-check><a href=/haltian-iot/apis/data-api/ title="Data API (Parquet)" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapisdata-api><span>Data API</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apifolder-structure-li><input type=checkbox id=m-haltian-iotapisdata-apifolder-structure-check>
<label for=m-haltian-iotapisdata-apifolder-structure-check><a href=/haltian-iot/apis/data-api/folder-structure/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apifolder-structure><span>Folder Structure</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apischema-reference-li><input type=checkbox id=m-haltian-iotapisdata-apischema-reference-check>
<label for=m-haltian-iotapisdata-apischema-reference-check><a href=/haltian-iot/apis/data-api/schema-reference/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apischema-reference><span>Schema Reference</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apiintegration-examples-li><input type=checkbox id=m-haltian-iotapisdata-apiintegration-examples-check>
<label for=m-haltian-iotapisdata-apiintegration-examples-check><a href=/haltian-iot/apis/data-api/integration-examples/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apiintegration-examples><span>Integration Examples</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apiazure-integration-li><input type=checkbox id=m-haltian-iotapisdata-apiazure-integration-check>
<label for=m-haltian-iotapisdata-apiazure-integration-check><a href=/haltian-iot/apis/data-api/azure-integration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apiazure-integration><span>Azure Integration</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapplications-li><input type=checkbox id=m-haltian-iotapplications-check>
<label for=m-haltian-iotapplications-check><a href=/haltian-iot/applications/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapplications><span>Applications</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapplicationsiot-studio-li><input type=checkbox id=m-haltian-iotapplicationsiot-studio-check>
<label for=m-haltian-iotapplicationsiot-studio-check><a href=/haltian-iot/applications/iot-studio/ title="Haltian IoT Studio" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapplicationsiot-studio><span>IoT Studio</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotguides-li><input type=checkbox id=m-haltian-iotguides-check>
<label for=m-haltian-iotguides-check><a href=/haltian-iot/guides/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotguides><span>Guides</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesmqtt-subscription-li><input type=checkbox id=m-haltian-iotguidesmqtt-subscription-check>
<label for=m-haltian-iotguidesmqtt-subscription-check><a href=/haltian-iot/guides/mqtt-subscription/ title="Subscribe to MQTT Data Stream" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesmqtt-subscription><span>MQTT Subscription</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesqr-code-identification-li><input type=checkbox id=m-haltian-iotguidesqr-code-identification-check>
<label for=m-haltian-iotguidesqr-code-identification-check><a href=/haltian-iot/guides/qr-code-identification/ title="Identify Device by QR Code" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesqr-code-identification><span>QR Code Identification</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesoccupancy-data-li><input type=checkbox id=m-haltian-iotguidesoccupancy-data-check>
<label for=m-haltian-iotguidesoccupancy-data-check><a href=/haltian-iot/guides/occupancy-data/ title="Working with Occupancy Data" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesoccupancy-data><span>Occupancy Data</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesposition-data-li><input type=checkbox id=m-haltian-iotguidesposition-data-check>
<label for=m-haltian-iotguidesposition-data-check><a href=/haltian-iot/guides/position-data/ title="Position Data Best Practices" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesposition-data><span>Position Data</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesmeasurement-types-li><input type=checkbox id=m-haltian-iotguidesmeasurement-types-check>
<label for=m-haltian-iotguidesmeasurement-types-check><a href=/haltian-iot/guides/measurement-types/ title="Measurement Types Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesmeasurement-types><span>Measurement Types</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotintegrations-li><input type=checkbox id=m-haltian-iotintegrations-check>
<label for=m-haltian-iotintegrations-check><a href=/haltian-iot/integrations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotintegrations><span>Integrations</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotintegrationsmicrosoft-places-li><input type=checkbox id=m-haltian-iotintegrationsmicrosoft-places-check>
<label for=m-haltian-iotintegrationsmicrosoft-places-check><a href=/haltian-iot/integrations/microsoft-places/ title="Microsoft Places Integration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotintegrationsmicrosoft-places><span>Microsoft Places</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotintegrationsthingsboard-li><input type=checkbox id=m-haltian-iotintegrationsthingsboard-check>
<label for=m-haltian-iotintegrationsthingsboard-check><a href=/haltian-iot/integrations/thingsboard/ title="ThingsBoard Integration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotintegrationsthingsboard><span>ThingsBoard</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotreference-li><input type=checkbox id=m-haltian-iotreference-check>
<label for=m-haltian-iotreference-check><a href=/haltian-iot/reference/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotreference><span>Reference</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text>On this page</span>
<a class=td-toc-title__link title="Top of page" href=#></a></div><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#mqtt-topic-structure>MQTT Topic Structure</a><ul><li><a href=#topic-pattern>Topic Pattern</a></li><li><a href=#example-topic>Example Topic</a></li><li><a href=#subscription-pattern>Subscription Pattern</a></li></ul></li><li><a href=#mqtt-payload-structure-json>MQTT Payload Structure (JSON)</a><ul><li><a href=#json-schema>JSON Schema</a></li><li><a href=#field-descriptions>Field Descriptions</a></li><li><a href=#origin-topic-structure>Origin Topic Structure</a></li><li><a href=#extracting-the-binary-payload>Extracting the Binary Payload</a></li></ul></li><li><a href=#wirepas-protobuf-message>Wirepas Protobuf Message</a><ul><li><a href=#protobuf-schema-simplified>Protobuf Schema (Simplified)</a></li><li><a href=#key-fields-explained>Key Fields Explained</a></li></ul></li><li><a href=#endpoint-routing>Endpoint Routing</a><ul><li><a href=#known-endpoint-types>Known Endpoint Types</a></li></ul></li><li><a href=#decoding-the-wirepas-protobuf-wrapper>Decoding the Wirepas Protobuf Wrapper</a><ul><li><a href=#python-implementation>Python Implementation</a></li></ul></li><li><a href=#implementation-checklist>Implementation Checklist</a><ul><li><a href=#for-ai-agents--developers>For AI Agents / Developers</a></li><li><a href=#protobuf-field-quick-reference>Protobuf Field Quick Reference</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/haltian-iot/>Haltian IoT</a></li><li class=breadcrumb-item><a href=/haltian-iot/apis/>APIs</a></li><li class=breadcrumb-item><a href=/haltian-iot/apis/stream-api/>Stream API</a></li><li class="breadcrumb-item active" aria-current=page>Cloud Binary Passthrough</li></ol></nav><div class=td-content><h1>Cloud Binary Passthrough</h1><div class=lead>Raw binary data passthrough via Haltian IoT Cloud MQTT for third-party Wirepas devices</div><header class=article-meta></header><div class="alert alert-warning" role=alert><div class="h4 alert-heading" role=heading>Beta Feature</div><p>Cloud Binary Passthrough is currently in <strong>beta</strong>. This feature must be enabled for your organization before use. Contact <a href=https://haltian.com/contact/>Haltian Support</a> to request access.</p></div><blockquote><p><strong>Audience</strong>: Technical architects, developers, and AI coding agents<br><strong>Prerequisite</strong>: MQTT subscription already configured via Haltian GraphQL API<br><strong>Scope</strong>: Understanding and parsing Wirepas mesh network binary passthrough data via Haltian IoT Cloud</p></blockquote><hr><h2 id=overview>Overview</h2><p>This guide explains how to process binary passthrough data from Wirepas mesh networks received via <strong>cloud-based MQTT</strong>. The data flows from wireless sensors through Wirepas gateways to Haltian IoT Cloud, which forwards it to your MQTT broker.</p><blockquote><p><strong>Note</strong>: Selected Haltian IoT gateways also support direct <a href=/devices/technical-reference/gateway-binary-passthrough/>Gateway Binary Passthrough</a> via local MQTT. This document covers only the <strong>cloud-based</strong> approach where data is routed through Haltian IoT Cloud.</p></blockquote><p><strong>Data Flow (Cloud-Based):</strong></p><pre tabindex=0><code>Sensor → Wirepas Gateway → Haltian IoT Cloud → MQTT Broker → Your Application
</code></pre><hr><h2 id=mqtt-topic-structure>MQTT Topic Structure</h2><h3 id=topic-pattern>Topic Pattern</h3><pre tabindex=0><code>haltian-iot/events/{subscriptionId}/{keyId}/payloads/wirepas/+
</code></pre><table><thead><tr><th>Segment</th><th>Description</th></tr></thead><tbody><tr><td><code>haltian-iot/events</code></td><td>Fixed prefix for all Haltian IoT events</td></tr><tr><td><code>{subscriptionId}</code></td><td>Your GraphQL subscription UUID</td></tr><tr><td><code>{keyId}</code></td><td>MQTT authentication key identifier</td></tr><tr><td><code>payloads/wirepas</code></td><td>Indicates Wirepas mesh network data</td></tr><tr><td><code>+</code></td><td>Wildcard matching any device identifier</td></tr></tbody></table><blockquote><p><strong>Note</strong>: The device identifier is the <strong>Haltian IoT device UUID</strong> (e.g., <code>550e8400-e29b-41d4-a716-446655440000</code>), not the Wirepas node address.</p></blockquote><h3 id=example-topic>Example Topic</h3><pre tabindex=0><code>haltian-iot/events/abc123-def456/key789/payloads/wirepas/device-uuid-001
</code></pre><h3 id=subscription-pattern>Subscription Pattern</h3><p>Subscribe to all devices under your subscription using:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#000>topic</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>f</span><span style=color:#4e9a06>&#34;haltian-iot/events/</span><span style=color:#4e9a06>{</span><span style=color:#000>subscription_id</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>/</span><span style=color:#4e9a06>{</span><span style=color:#000>key_id</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>/payloads/wirepas/+&#34;</span>
</span></span><span style=display:flex><span><span style=color:#000>client</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>subscribe</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>topic</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><hr><h2 id=mqtt-payload-structure-json>MQTT Payload Structure (JSON)</h2><p>The MQTT message payload is a <strong>JSON object</strong> containing metadata and the binary sensor data encoded as base64.</p><h3 id=json-schema>JSON Schema</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;received_at&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2026-01-29T12:34:56.789Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;mqtt_topic&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;haltian-iot/wirepas/gw-event/received_data/BS225000789/sink1/7156763/21/21&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;payload&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;CkpCTgofCgtCUzIyNTAwMDc4ORIFc2luazEY65DNj9fX+JPTARj...&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><p><strong>Example breakdown (endpoint 21/21 - Thingsee CBOR):</strong></p><ul><li>Device: Thingsee sensor (node address <code>7156763</code>)</li><li>Gateway: <code>BS225000789</code> / <code>sink1</code></li><li>Inner payload (after protobuf decode): CBOR array containing temperature, humidity, battery level</li></ul><p>After full decoding, this example yields:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;tsmId&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>12345678</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;tsmEv&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;tsmTs&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>1706528096</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;temp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>23.45</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;humd&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>45.2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;batl&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>95</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=field-descriptions>Field Descriptions</h3><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>received_at</code></td><td>string</td><td>ISO 8601 timestamp when message was received by Haltian IoT Cloud</td></tr><tr><td><code>value.mqtt_topic</code></td><td>string</td><td>Original Wirepas gateway MQTT topic (contains routing info)</td></tr><tr><td><code>value.payload</code></td><td>string</td><td>Base64-encoded Wirepas protobuf message</td></tr></tbody></table><h3 id=origin-topic-structure>Origin Topic Structure</h3><p>The <code>value.mqtt_topic</code> field contains the original gateway topic with embedded endpoint information:</p><pre tabindex=0><code>haltian-iot/wirepas/gw-event/received_data/{gateway}/{sink}/{node_address}/{source_ep}/{dest_ep}
</code></pre><table><thead><tr><th>Segment</th><th>Example</th><th>Description</th></tr></thead><tbody><tr><td><code>{gateway}</code></td><td><code>BS225000789</code></td><td>Wirepas gateway identifier</td></tr><tr><td><code>{sink}</code></td><td><code>sink1</code></td><td>Gateway sink name</td></tr><tr><td><code>{node_address}</code></td><td><code>7156763</code></td><td>Wirepas node address (sensor)</td></tr><tr><td><code>{source_ep}</code></td><td><code>11</code></td><td>Source endpoint (data type)</td></tr><tr><td><code>{dest_ep}</code></td><td><code>11</code></td><td>Destination endpoint</td></tr></tbody></table><h3 id=extracting-the-binary-payload>Extracting the Binary Payload</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>base64</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>json</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>extract_payload</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mqtt_message</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>tuple</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>str</span><span style=color:#000;font-weight:700>]:</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    Extract binary payload and endpoints from MQTT JSON message.
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    Returns:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>        Tuple of (decoded_payload_bytes, source_endpoint, dest_endpoint)
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>data</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>json</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>loads</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>mqtt_message</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>decode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;utf-8&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>    <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>data</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;value&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{})</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># Decode base64 payload</span>
</span></span><span style=display:flex><span>    <span style=color:#000>payload_b64</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;payload&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>payload_bytes</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>base64</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>b64decode</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>payload_b64</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>payload_b64</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#4e9a06>b</span><span style=color:#4e9a06>&#34;&#34;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># Extract endpoints from origin topic</span>
</span></span><span style=display:flex><span>    <span style=color:#000>origin_topic</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;mqtt_topic&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>parts</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>origin_topic</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>split</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>source_ep</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>parts</span><span style=color:#000;font-weight:700>[</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>]</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>parts</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>&gt;=</span> <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#4e9a06>&#34;unknown&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>dest_ep</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>parts</span><span style=color:#000;font-weight:700>[</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]</span> <span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>parts</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>&gt;=</span> <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#204a87;font-weight:700>else</span> <span style=color:#4e9a06>&#34;unknown&#34;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>payload_bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>source_ep</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>dest_ep</span>
</span></span></code></pre></div><hr><h2 id=wirepas-protobuf-message>Wirepas Protobuf Message</h2><p>The base64-decoded <code>value.payload</code> is <strong>always</strong> a Protocol Buffer encoded <code>WirepasMessage</code>, regardless of the device type (Thingsee, etc.). This is the standard Wirepas mesh network transport format.</p><blockquote><p><strong>Important</strong>: All devices in the Wirepas mesh use the same protobuf wrapper. The <strong>device-specific format</strong> (CBOR, binary, TLV) is contained within the <code>payload_data</code> field of the protobuf. The endpoint pair indicates which format to expect inside.</p></blockquote><h3 id=protobuf-schema-simplified>Protobuf Schema (Simplified)</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-protobuf data-lang=protobuf><span style=display:flex><span><span style=color:#204a87;font-weight:700>message</span> <span style=color:#000>WirepasMessage</span> <span style=color:#000;font-weight:700>{</span><span style=color:#a40000>
</span></span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>uint32</span> <span style=color:#000>source_address</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>;</span>      <span style=color:#8f5902;font-style:italic>// Sensor node address (unique per device)
</span></span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>uint32</span> <span style=color:#000>destination_address</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>;</span>  <span style=color:#8f5902;font-style:italic>// Target address (usually gateway)
</span></span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>uint32</span> <span style=color:#000>source_endpoint</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>;</span>      <span style=color:#8f5902;font-style:italic>// Identifies data type/protocol
</span></span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>uint32</span> <span style=color:#000>destination_endpoint</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>;</span> <span style=color:#8f5902;font-style:italic>// Usually matches source_endpoint
</span></span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>uint64</span> <span style=color:#000>travel_time_ms</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>;</span>       <span style=color:#8f5902;font-style:italic>// Network transit time
</span></span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>uint32</span> <span style=color:#000>qos</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>;</span>                  <span style=color:#8f5902;font-style:italic>// Quality of service level
</span></span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>bytes</span>  <span style=color:#000>payload_data</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>;</span>         <span style=color:#8f5902;font-style:italic>// The actual sensor data (inner payload)
</span></span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>uint64</span> <span style=color:#000>rx_time_ms_epoch</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>8</span><span style=color:#000;font-weight:700>;</span>     <span style=color:#8f5902;font-style:italic>// Receive timestamp (milliseconds since epoch)
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#a40000>
</span></span></span></code></pre></div><h3 id=key-fields-explained>Key Fields Explained</h3><table><thead><tr><th>Field</th><th>Purpose</th><th>Typical Values</th></tr></thead><tbody><tr><td><code>source_address</code></td><td>Unique sensor identifier</td><td>32-bit integer (e.g., <code>12345678</code>)</td></tr><tr><td><code>source_endpoint</code></td><td>Data protocol identifier</td><td><code>1</code>, <code>11</code>, <code>21</code>, <code>120</code>, <code>160</code></td></tr><tr><td><code>destination_endpoint</code></td><td>Usually matches source</td><td>Same as source_endpoint</td></tr><tr><td><code>payload_data</code></td><td>Inner binary payload</td><td>Format depends on endpoint</td></tr><tr><td><code>rx_time_ms_epoch</code></td><td>Message receive time</td><td>Unix timestamp in milliseconds</td></tr></tbody></table><hr><h2 id=endpoint-routing>Endpoint Routing</h2><p>The <strong>endpoint pair</strong> (<code>source_endpoint</code>/<code>destination_endpoint</code>) determines how to parse the inner <code>payload_data</code>. Each endpoint type uses a different encoding format.</p><h3 id=known-endpoint-types>Known Endpoint Types</h3><table><thead><tr><th>Source EP</th><th>Dest EP</th><th>Protocol</th><th>Inner Format</th><th>Description</th></tr></thead><tbody><tr><td><code>21</code></td><td><code>21</code></td><td><a href=/devices/technical-reference/cbor-json-conversion/>Thingsee CBOR</a></td><td>CBOR array</td><td>Thingsee multi-sensor devices</td></tr></tbody></table><hr><h2 id=decoding-the-wirepas-protobuf-wrapper>Decoding the Wirepas Protobuf Wrapper</h2><h3 id=python-implementation>Python Implementation</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>struct</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>dataclasses</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>dataclass</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>typing</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>Optional</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5c35cc;font-weight:700>@dataclass</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>WirepasMessage</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#000>source_address</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000>destination_address</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000>source_endpoint</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000>destination_endpoint</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000>travel_time_ms</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000>qos</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span>
</span></span><span style=display:flex><span>    <span style=color:#000>payload_data</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>bytes</span>
</span></span><span style=display:flex><span>    <span style=color:#000>rx_time_ms_epoch</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>decode_wirepas_message</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>raw_data</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#000>WirepasMessage</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    Decode Wirepas protobuf message.
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    Protobuf wire format:
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    - Field number and wire type packed in varint
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    - Wire type 0 = varint, type 2 = length-delimited (bytes)
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>pos</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>    <span style=color:#000>fields</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>while</span> <span style=color:#000>pos</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>raw_data</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic># Read field tag (varint)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>tag</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pos</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>_read_varint</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>raw_data</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pos</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000>field_number</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>tag</span> <span style=color:#ce5c00;font-weight:700>&gt;&gt;</span> <span style=color:#0000cf;font-weight:700>3</span>
</span></span><span style=display:flex><span>        <span style=color:#000>wire_type</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>tag</span> <span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#0000cf;font-weight:700>0x07</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>wire_type</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#8f5902;font-style:italic># Varint</span>
</span></span><span style=display:flex><span>            <span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pos</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>_read_varint</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>raw_data</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pos</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>elif</span> <span style=color:#000>wire_type</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span>  <span style=color:#8f5902;font-style:italic># Length-delimited</span>
</span></span><span style=display:flex><span>            <span style=color:#000>length</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pos</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>_read_varint</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>raw_data</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pos</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>            <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>raw_data</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>pos</span><span style=color:#000;font-weight:700>:</span><span style=color:#000>pos</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>length</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>            <span style=color:#000>pos</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#000>length</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>else</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>raise</span> <span style=color:#c00;font-weight:700>ValueError</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>f</span><span style=color:#4e9a06>&#34;Unsupported wire type: </span><span style=color:#4e9a06>{</span><span style=color:#000>wire_type</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#000>fields</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>field_number</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>value</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>WirepasMessage</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>        <span style=color:#000>source_address</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>fields</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>        <span style=color:#000>destination_address</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>fields</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>        <span style=color:#000>source_endpoint</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>fields</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>        <span style=color:#000>destination_endpoint</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>fields</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>        <span style=color:#000>travel_time_ms</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>fields</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>        <span style=color:#000>qos</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>fields</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>        <span style=color:#000>payload_data</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>fields</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>b</span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>        <span style=color:#000>rx_time_ms_epoch</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>fields</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>_read_varint</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>data</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pos</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-&gt;</span> <span style=color:#204a87>tuple</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>int</span><span style=color:#000;font-weight:700>]:</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;&#34;&#34;Read a protobuf varint from data at position pos.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>    <span style=color:#000>shift</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>while</span> <span style=color:#204a87;font-weight:700>True</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#000>byte</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>data</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>pos</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>        <span style=color:#000>pos</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span>        <span style=color:#000>result</span> <span style=color:#ce5c00;font-weight:700>|=</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>byte</span> <span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#0000cf;font-weight:700>0x7F</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>&lt;&lt;</span> <span style=color:#000>shift</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>if</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>byte</span> <span style=color:#ce5c00;font-weight:700>&amp;</span> <span style=color:#0000cf;font-weight:700>0x80</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>            <span style=color:#204a87;font-weight:700>break</span>
</span></span><span style=display:flex><span>        <span style=color:#000>shift</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#0000cf;font-weight:700>7</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>result</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pos</span>
</span></span></code></pre></div><hr><h2 id=implementation-checklist>Implementation Checklist</h2><h3 id=for-ai-agents--developers>For AI Agents / Developers</h3><h4 id=prerequisites>Prerequisites</h4><ul><li><input disabled type=checkbox> MQTT broker connection established</li><li><input disabled type=checkbox> Subscription ID and Key ID available from GraphQL setup</li><li><input disabled type=checkbox> Python environment with <code>paho-mqtt</code> installed</li></ul><h4 id=core-implementation>Core Implementation</h4><ul><li><input disabled type=checkbox> Subscribe to topic pattern: <code>haltian-iot/events/{subId}/{keyId}/payloads/wirepas/+</code></li><li><input disabled type=checkbox> Implement protobuf decoder</li><li><input disabled type=checkbox> Implement <code>WirepasMessage</code> protobuf decoder</li><li><input disabled type=checkbox> Extract fields: <code>source_endpoint</code>, <code>destination_endpoint</code>, <code>payload_data</code></li></ul><h4 id=endpoint-routing-1>Endpoint Routing</h4><ul><li><input disabled type=checkbox> Create endpoint handler mapping dictionary</li><li><input disabled type=checkbox> Implement routing function with <code>(source_ep, dest_ep)</code> tuple keys</li><li><input disabled type=checkbox> Add fallback handler for unknown endpoints</li></ul><h4 id=known-handlers-to-implement>Known Handlers to Implement</h4><ul><li><input disabled type=checkbox> <code>(21, 21)</code> → <a href=/devices/technical-reference/cbor-json-conversion/>Thingsee CBOR parser</a></li></ul><h4 id=error-handling>Error Handling</h4><ul><li><input disabled type=checkbox> Handle malformed protobuf messages</li><li><input disabled type=checkbox> Log unknown endpoint pairs for analysis</li><li><input disabled type=checkbox> Implement graceful degradation (return raw hex on parse failure)</li></ul><hr><h3 id=protobuf-field-quick-reference>Protobuf Field Quick Reference</h3><table><thead><tr><th>Field #</th><th>Name</th><th>Wire Type</th><th>Description</th></tr></thead><tbody><tr><td>1</td><td>source_address</td><td>varint</td><td>Sensor node ID</td></tr><tr><td>2</td><td>destination_address</td><td>varint</td><td>Gateway ID</td></tr><tr><td>3</td><td>source_endpoint</td><td>varint</td><td>Data type identifier</td></tr><tr><td>4</td><td>destination_endpoint</td><td>varint</td><td>Usually = source</td></tr><tr><td>5</td><td>travel_time_ms</td><td>varint</td><td>Network latency</td></tr><tr><td>6</td><td>qos</td><td>varint</td><td>Quality of service</td></tr><tr><td>7</td><td>payload_data</td><td>bytes</td><td>Inner sensor data</td></tr><tr><td>8</td><td>rx_time_ms_epoch</td><td>varint</td><td>Receive timestamp</td></tr></tbody></table></div></main></div></div><footer class="td-footer bg-dark"><div class="container py-4"><div class=row><div class="col-12 col-md-6 text-center text-md-left"><div class=td-footer__left><span class=text-white>&copy; 2026 Haltian |
<a href=https://haltian.com/privacy class=text-white>Privacy Policy</a></span></div></div><div class="col-12 col-md-6 text-center text-md-right"><div class=td-footer__right><a class="text-white mx-2" target=_blank rel=noopener href=mailto:support@haltian.com aria-label="Contact Support"><i class="fa fa-envelope"></i>
</a><a class="text-white mx-2" target=_blank rel=noopener href=https://haltian.com aria-label="Haltian Website"><i class="fa fa-globe"></i>
</a><a class="text-white mx-2" target=_blank rel=noopener href=https://github.com/haltian aria-label=GitHub><i class="fab fa-github"></i></a></div></div></div></div></footer></div><script src=/js/main.min.8dd4d36f10f64ef5224e04ba313f8e91e183feca404406187e7d4bad9bc83b21.js integrity="sha256-jdTTbxD2TvUiTgS6MT+OkeGD/spARAYYfn1LrZvIOyE=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>