<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Position Data Best Practices | Haltian Developer Documentation</title><meta name=description content="Best practices for working with Haltian IoT position and location data"><meta property="og:url" content="https://developer.haltian.io/haltian-iot/guides/position-data/"><meta property="og:site_name" content="Haltian Developer Documentation"><meta property="og:title" content="Position Data Best Practices"><meta property="og:description" content="Best practices for working with Haltian IoT position and location data"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="haltian-iot"><meta property="article:modified_time" content="2026-01-28T17:18:17+02:00"><meta itemprop=name content="Position Data Best Practices"><meta itemprop=description content="Best practices for working with Haltian IoT position and location data"><meta itemprop=dateModified content="2026-01-28T17:18:17+02:00"><meta itemprop=wordCount content="892"><meta name=twitter:card content="summary"><meta name=twitter:title content="Position Data Best Practices"><meta name=twitter:description content="Best practices for working with Haltian IoT position and location data"><link rel=preload href=/scss/main.min.d423c29d9765e7fa2af46a8f6237583add283e9337882d1b1c18b860d9bf357b.css as=style integrity="sha256-1CPCnZdl5/oq9GqPYjdYOt0oPpM3iC0bHBi4YNm/NXs=" crossorigin=anonymous><link href=/scss/main.min.d423c29d9765e7fa2af46a8f6237583add283e9337882d1b1c18b860d9bf357b.css rel=stylesheet integrity="sha256-1CPCnZdl5/oq9GqPYjdYOt0oPpM3iC0bHBi4YNm/NXs=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar navbar navbar-expand-lg navbar-dark bg-primary"><div class=container-fluid><a class=navbar-brand href=/><img src=https://developer.haltian.io/logo.png alt="Haltian Developer Documentation" height=28 class="d-inline-block align-top">
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarNav><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=/haltian-iot/>Haltian IoT</a></li><li class=nav-item><a class=nav-link href=/thingsee-iot/>Thingsee IoT</a></li><li class=nav-item><a class=nav-link href=/devices/>Devices</a></li><li class=nav-item><a class=nav-link href=/faq/>FAQ</a></li></ul><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.00fa5d2135fb7948f0b1ab0185774bd9.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><script>$(function(){$("#td-section-nav a").removeClass("active"),$("#td-section-nav #m-haltian-iotguidesposition-data").addClass("active"),$("#td-section-nav #m-haltian-iotguidesposition-data-li span").addClass("td-sidebar-nav-active-item"),$("#td-section-nav #m-haltian-iotguidesposition-data").parents("li").addClass("active-path"),$("#td-section-nav li.active-path").addClass("show"),$("#td-section-nav li.active-path").children("input").prop("checked",!0),$("#td-section-nav #m-haltian-iotguidesposition-data-li").siblings("li").addClass("show"),$("#td-section-nav #m-haltian-iotguidesposition-data-li").children("ul").children("li").addClass("show"),$("#td-sidebar-menu").toggleClass("d-none")})</script><div id=td-sidebar-menu class="td-sidebar__inner d-none"><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.00fa5d2135fb7948f0b1ab0185774bd9.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iot-li><a href=/haltian-iot/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-haltian-iot><span>Haltian IoT</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotgetting-started-li><input type=checkbox id=m-haltian-iotgetting-started-check>
<label for=m-haltian-iotgetting-started-check><a href=/haltian-iot/getting-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotgetting-started><span>Getting Started</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotgetting-startedplatform-overview-li><input type=checkbox id=m-haltian-iotgetting-startedplatform-overview-check>
<label for=m-haltian-iotgetting-startedplatform-overview-check><a href=/haltian-iot/getting-started/platform-overview/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotgetting-startedplatform-overview><span>Platform Overview</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotconcepts-li><input type=checkbox id=m-haltian-iotconcepts-check>
<label for=m-haltian-iotconcepts-check><a href=/haltian-iot/concepts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotconcepts><span>Concepts</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotconceptsroles-and-access-li><input type=checkbox id=m-haltian-iotconceptsroles-and-access-check>
<label for=m-haltian-iotconceptsroles-and-access-check><a href=/haltian-iot/concepts/roles-and-access/ title="Roles and Access Management" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotconceptsroles-and-access><span>Roles & Access</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotconceptsglossary-li><input type=checkbox id=m-haltian-iotconceptsglossary-check>
<label for=m-haltian-iotconceptsglossary-check><a href=/haltian-iot/concepts/glossary/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotconceptsglossary><span>Glossary</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapis-li><input type=checkbox id=m-haltian-iotapis-check>
<label for=m-haltian-iotapis-check><a href=/haltian-iot/apis/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapis><span>APIs</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapisservice-api-li><input type=checkbox id=m-haltian-iotapisservice-api-check>
<label for=m-haltian-iotapisservice-api-check><a href=/haltian-iot/apis/service-api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapisservice-api><span>Service API</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisservice-apiauthentication-li><input type=checkbox id=m-haltian-iotapisservice-apiauthentication-check>
<label for=m-haltian-iotapisservice-apiauthentication-check><a href=/haltian-iot/apis/service-api/authentication/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisservice-apiauthentication><span>Authentication</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisservice-apiqueries-li><input type=checkbox id=m-haltian-iotapisservice-apiqueries-check>
<label for=m-haltian-iotapisservice-apiqueries-check><a href=/haltian-iot/apis/service-api/queries/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisservice-apiqueries><span>Queries</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisservice-apimutations-li><input type=checkbox id=m-haltian-iotapisservice-apimutations-check>
<label for=m-haltian-iotapisservice-apimutations-check><a href=/haltian-iot/apis/service-api/mutations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisservice-apimutations><span>Mutations</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapisstream-api-li><input type=checkbox id=m-haltian-iotapisstream-api-check>
<label for=m-haltian-iotapisstream-api-check><a href=/haltian-iot/apis/stream-api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapisstream-api><span>Stream API</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisstream-apitopics-li><input type=checkbox id=m-haltian-iotapisstream-apitopics-check>
<label for=m-haltian-iotapisstream-apitopics-check><a href=/haltian-iot/apis/stream-api/topics/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisstream-apitopics><span>Topics</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisstream-apiexamples-li><input type=checkbox id=m-haltian-iotapisstream-apiexamples-check>
<label for=m-haltian-iotapisstream-apiexamples-check><a href=/haltian-iot/apis/stream-api/examples/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisstream-apiexamples><span>Examples</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisstream-apicloud-binary-passthrough-li><input type=checkbox id=m-haltian-iotapisstream-apicloud-binary-passthrough-check>
<label for=m-haltian-iotapisstream-apicloud-binary-passthrough-check><a href=/haltian-iot/apis/stream-api/cloud-binary-passthrough/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisstream-apicloud-binary-passthrough><span>Cloud Binary Passthrough</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapisdata-api-li><input type=checkbox id=m-haltian-iotapisdata-api-check>
<label for=m-haltian-iotapisdata-api-check><a href=/haltian-iot/apis/data-api/ title="Data API (Parquet)" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapisdata-api><span>Data API</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apifolder-structure-li><input type=checkbox id=m-haltian-iotapisdata-apifolder-structure-check>
<label for=m-haltian-iotapisdata-apifolder-structure-check><a href=/haltian-iot/apis/data-api/folder-structure/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apifolder-structure><span>Folder Structure</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apischema-reference-li><input type=checkbox id=m-haltian-iotapisdata-apischema-reference-check>
<label for=m-haltian-iotapisdata-apischema-reference-check><a href=/haltian-iot/apis/data-api/schema-reference/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apischema-reference><span>Schema Reference</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apiintegration-examples-li><input type=checkbox id=m-haltian-iotapisdata-apiintegration-examples-check>
<label for=m-haltian-iotapisdata-apiintegration-examples-check><a href=/haltian-iot/apis/data-api/integration-examples/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apiintegration-examples><span>Integration Examples</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapisdata-apiazure-integration-li><input type=checkbox id=m-haltian-iotapisdata-apiazure-integration-check>
<label for=m-haltian-iotapisdata-apiazure-integration-check><a href=/haltian-iot/apis/data-api/azure-integration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapisdata-apiazure-integration><span>Azure Integration</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotapplications-li><input type=checkbox id=m-haltian-iotapplications-check>
<label for=m-haltian-iotapplications-check><a href=/haltian-iot/applications/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotapplications><span>Applications</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotapplicationsiot-studio-li><input type=checkbox id=m-haltian-iotapplicationsiot-studio-check>
<label for=m-haltian-iotapplicationsiot-studio-check><a href=/haltian-iot/applications/iot-studio/ title="Haltian IoT Studio" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotapplicationsiot-studio><span>IoT Studio</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotguides-li><input type=checkbox id=m-haltian-iotguides-check>
<label for=m-haltian-iotguides-check><a href=/haltian-iot/guides/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotguides><span>Guides</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesmqtt-subscription-li><input type=checkbox id=m-haltian-iotguidesmqtt-subscription-check>
<label for=m-haltian-iotguidesmqtt-subscription-check><a href=/haltian-iot/guides/mqtt-subscription/ title="Subscribe to MQTT Data Stream" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesmqtt-subscription><span>MQTT Subscription</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesqr-code-identification-li><input type=checkbox id=m-haltian-iotguidesqr-code-identification-check>
<label for=m-haltian-iotguidesqr-code-identification-check><a href=/haltian-iot/guides/qr-code-identification/ title="Identify Device by QR Code" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesqr-code-identification><span>QR Code Identification</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesoccupancy-data-li><input type=checkbox id=m-haltian-iotguidesoccupancy-data-check>
<label for=m-haltian-iotguidesoccupancy-data-check><a href=/haltian-iot/guides/occupancy-data/ title="Working with Occupancy Data" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesoccupancy-data><span>Occupancy Data</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesposition-data-li><input type=checkbox id=m-haltian-iotguidesposition-data-check>
<label for=m-haltian-iotguidesposition-data-check><a href=/haltian-iot/guides/position-data/ title="Position Data Best Practices" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesposition-data><span>Position Data</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotguidesmeasurement-types-li><input type=checkbox id=m-haltian-iotguidesmeasurement-types-check>
<label for=m-haltian-iotguidesmeasurement-types-check><a href=/haltian-iot/guides/measurement-types/ title="Measurement Types Reference" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotguidesmeasurement-types><span>Measurement Types</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-haltian-iotintegrations-li><input type=checkbox id=m-haltian-iotintegrations-check>
<label for=m-haltian-iotintegrations-check><a href=/haltian-iot/integrations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotintegrations><span>Integrations</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotintegrationsmicrosoft-places-li><input type=checkbox id=m-haltian-iotintegrationsmicrosoft-places-check>
<label for=m-haltian-iotintegrationsmicrosoft-places-check><a href=/haltian-iot/integrations/microsoft-places/ title="Microsoft Places Integration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotintegrationsmicrosoft-places><span>Microsoft Places</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotintegrationsthingsboard-li><input type=checkbox id=m-haltian-iotintegrationsthingsboard-check>
<label for=m-haltian-iotintegrationsthingsboard-check><a href=/haltian-iot/integrations/thingsboard/ title="ThingsBoard Integration" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-haltian-iotintegrationsthingsboard><span>ThingsBoard</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-haltian-iotreference-li><input type=checkbox id=m-haltian-iotreference-check>
<label for=m-haltian-iotreference-check><a href=/haltian-iot/reference/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-haltian-iotreference><span>Reference</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text>On this page</span>
<a class=td-toc-title__link title="Top of page" href=#></a></div><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#device-identifiers>Device Identifiers</a></li><li><a href=#device-models-for-position-tracking>Device Models for Position Tracking</a><ul><li><a href=#tags-tracked-assets>Tags (Tracked Assets)</a></li><li><a href=#infrastructure-tracking-infrastructure>Infrastructure (Tracking Infrastructure)</a></li></ul></li><li><a href=#position-measurement-types>Position Measurement Types</a><ul><li><a href=#positionmeasurement>PositionMeasurement</a></li><li><a href=#positionmeasurementzone>PositionMeasurementZone</a></li></ul></li><li><a href=#querying-position-data>Querying Position Data</a><ul><li><a href=#latest-position-via-graphql>Latest Position via GraphQL</a></li><li><a href=#position-history>Position History</a></li><li><a href=#find-devices-in-zone>Find Devices in Zone</a></li></ul></li><li><a href=#mqtt-position-streams>MQTT Position Streams</a><ul><li><a href=#python-example-track-asset-positions>Python Example: Track Asset Positions</a></li></ul></li><li><a href=#coordinate-systems>Coordinate Systems</a><ul><li><a href=#local-coordinates>Local Coordinates</a></li><li><a href=#global-coordinates>Global Coordinates</a></li></ul></li><li><a href=#accuracy-considerations>Accuracy Considerations</a><ul><li><a href=#factors-affecting-accuracy>Factors Affecting Accuracy</a></li><li><a href=#accuracy-levels>Accuracy Levels</a></li></ul></li><li><a href=#best-practices>Best Practices</a><ul><li><a href=#1-use-appropriate-position-type>1. Use Appropriate Position Type</a></li><li><a href=#2-handle-missing-data>2. Handle Missing Data</a></li><li><a href=#3-filter-by-accuracy>3. Filter by Accuracy</a></li><li><a href=#4-aggregate-for-heat-maps>4. Aggregate for Heat Maps</a></li><li><a href=#5-handle-stale-data>5. Handle Stale Data</a></li></ul></li><li><a href=#next-steps>Next Steps</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/haltian-iot/>Haltian IoT</a></li><li class=breadcrumb-item><a href=/haltian-iot/guides/>Guides</a></li><li class="breadcrumb-item active" aria-current=page>Position Data</li></ol></nav><div class=td-content><h1>Position Data Best Practices</h1><div class=lead>Best practices for working with Haltian IoT position and location data</div><header class=article-meta></header><p>This guide provides best practices for working with position data from Haltian IoT devices, including asset tags, locators, and presence sensors.</p><h2 id=overview>Overview</h2><p>Haltian IoT provides several types of position data:</p><table><thead><tr><th>Data Type</th><th>Description</th><th>Use Case</th></tr></thead><tbody><tr><td><strong>Global Position</strong></td><td>GPS/GNSS coordinates</td><td>Outdoor tracking</td></tr><tr><td><strong>Local Position</strong></td><td>X/Y/Z relative coordinates</td><td>Indoor positioning</td></tr><tr><td><strong>Zone Position</strong></td><td>Named zone/area</td><td>Room-level tracking</td></tr><tr><td><strong>RSSI Position</strong></td><td>Signal strength based</td><td>Proximity detection</td></tr></tbody></table><h2 id=device-identifiers>Device Identifiers</h2><p>When working with position data, understand the device identifiers:</p><table><thead><tr><th>Identifier</th><th>Description</th><th>Where Found</th></tr></thead><tbody><tr><td><strong>TUID</strong></td><td>Thingsee Unique ID</td><td>Physical device QR code, GraphQL API</td></tr><tr><td><strong>UUID</strong></td><td>Haltian IoT internal ID</td><td>MQTT topics, GraphQL API</td></tr><tr><td><strong>Device Model</strong></td><td>Hardware type identifier</td><td>GraphQL API</td></tr></tbody></table><div class="alert alert-warning" role=alert><div class="h4 alert-heading" role=heading>Important</div><p>MQTT topics use UUID, not TUID. Use the GraphQL API to map between identifiers.</p></div><h2 id=device-models-for-position-tracking>Device Models for Position Tracking</h2><h3 id=tags-tracked-assets>Tags (Tracked Assets)</h3><table><thead><tr><th>Model</th><th>Description</th><th>Use Case</th></tr></thead><tbody><tr><td>Haltian Nano Tag</td><td>Small BLE tag with Wirepas</td><td>Asset/inventory tracking</td></tr><tr><td>Haltian Asset Tag</td><td>Larger tag with sensors</td><td>High-value asset tracking</td></tr></tbody></table><h3 id=infrastructure-tracking-infrastructure>Infrastructure (Tracking Infrastructure)</h3><table><thead><tr><th>Model</th><th>Description</th><th>Use Case</th></tr></thead><tbody><tr><td>Haltian EH Locator</td><td>Energy harvesting locator</td><td>Indoor positioning anchor</td></tr><tr><td>Haltian IoT Gateway</td><td>LAN/4G connected gateway</td><td>Data backhaul</td></tr></tbody></table><h2 id=position-measurement-types>Position Measurement Types</h2><h3 id=positionmeasurement>PositionMeasurement</h3><p>The primary position measurement containing location data:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;measured_at&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2025-01-28T10:30:00.000Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;position_local&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;x&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>12.5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;y&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>8.3</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;z&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>0.0</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;position_global&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Point&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>      <span style=color:#204a87;font-weight:700>&#34;coordinates&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>24.9384</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>60.1699</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>},</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;accuracy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2.5</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;floor&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;building_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;building-uuid&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>position_local</code></td><td>Object</td><td>X/Y/Z coordinates in meters relative to building origin</td></tr><tr><td><code>position_global</code></td><td>GeoJSON Point</td><td>[longitude, latitude] in WGS84</td></tr><tr><td><code>accuracy</code></td><td>Number</td><td>Estimated accuracy in meters</td></tr><tr><td><code>floor</code></td><td>Number</td><td>Floor number (optional)</td></tr><tr><td><code>building_id</code></td><td>UUID</td><td>Building identifier (optional)</td></tr></tbody></table><h3 id=positionmeasurementzone>PositionMeasurementZone</h3><p>Zone-based position indicating which named area the device is in:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;measured_at&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2025-01-28T10:30:00.000Z&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87;font-weight:700>&#34;value&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;zone_id&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;zone-uuid&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;zone_name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;Conference Room A&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;zone_type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;meeting_room&#34;</span><span style=color:#000;font-weight:700>,</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>&#34;entered_at&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;2025-01-28T10:25:00.000Z&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h2 id=querying-position-data>Querying Position Data</h2><h3 id=latest-position-via-graphql>Latest Position via GraphQL</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#204a87;font-weight:700>query</span><span style=color:#f8f8f8> </span><span style=color:#000>GetDevicePosition</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$deviceId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>ID</span><span style=color:#000;font-weight:700>!)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#000>device</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>$deviceId</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>id</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>tuid</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>name</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>lastPosition</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>measurements</span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>filter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8> </span><span style=color:#000>types</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;position&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>last</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>1</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>edges</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000>node</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#000>measuredAt</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#000>value</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>lastZone</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>measurements</span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>filter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8> </span><span style=color:#000>types</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;position_zone&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>last</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>1</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>edges</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000>node</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#000>measuredAt</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#000>value</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=position-history>Position History</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#204a87;font-weight:700>query</span><span style=color:#f8f8f8> </span><span style=color:#000>GetPositionHistory</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$deviceId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>ID</span><span style=color:#000;font-weight:700>!,</span><span style=color:#f8f8f8> </span><span style=color:#000>$from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DateTime</span><span style=color:#000;font-weight:700>!,</span><span style=color:#f8f8f8> </span><span style=color:#000>$to</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DateTime</span><span style=color:#000;font-weight:700>!)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#000>device</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>$deviceId</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>measurements</span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>filter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000>types</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;position&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000>from</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>$from</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000>to</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>$to</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>first</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>1000</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>edges</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000>node</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#000>measuredAt</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#000>value</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>pageInfo</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000>hasNextPage</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000>endCursor</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=find-devices-in-zone>Find Devices in Zone</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-graphql data-lang=graphql><span style=display:flex><span><span style=color:#204a87;font-weight:700>query</span><span style=color:#f8f8f8> </span><span style=color:#000>GetDevicesInZone</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>$zoneId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>ID</span><span style=color:#000;font-weight:700>!)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#000>space</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>id</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>$zoneId</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>name</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>devices</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>filter</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8> </span><span style=color:#000>state</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>ACTIVE</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>})</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000>edges</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000>node</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#000>id</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#000>tuid</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#000>name</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span><span style=color:#000>lastSeenAt</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h2 id=mqtt-position-streams>MQTT Position Streams</h2><p>Subscribe to real-time position updates:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Position measurements</span>
</span></span><span style=display:flex><span><span style=color:#4e9a06>&#34;haltian-iot/events/</span><span style=color:#4e9a06>{integration}</span><span style=color:#4e9a06>/</span><span style=color:#4e9a06>{apikey}</span><span style=color:#4e9a06>/measurements/position/#&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Zone changes</span>
</span></span><span style=display:flex><span><span style=color:#4e9a06>&#34;haltian-iot/events/</span><span style=color:#4e9a06>{integration}</span><span style=color:#4e9a06>/</span><span style=color:#4e9a06>{apikey}</span><span style=color:#4e9a06>/measurements/position_zone/#&#34;</span>
</span></span></code></pre></div><h3 id=python-example-track-asset-positions>Python Example: Track Asset Positions</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#!/usr/bin/env python3</span>
</span></span><span style=display:flex><span><span style=color:#4e9a06>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>Track asset positions in real-time via MQTT.
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>ssl</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>json</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>datetime</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>datetime</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>paho.mqtt.client</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>mqtt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Track latest positions</span>
</span></span><span style=display:flex><span><span style=color:#000>positions</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>on_message</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>client</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>userdata</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>msg</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>    <span style=color:#000>topic_parts</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>msg</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>topic</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>split</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>measurement_type</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>topic_parts</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>    <span style=color:#000>device_id</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>topic_parts</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#000>payload</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>json</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>loads</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>payload</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>decode</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;utf-8&#34;</span><span style=color:#000;font-weight:700>))</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>measurement_type</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;position&#34;</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;value&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>        <span style=color:#000>positions</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>device_id</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#34;timestamp&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;measured_at&#34;</span><span style=color:#000;font-weight:700>],</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#34;local&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;position_local&#34;</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#34;global&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;position_global&#34;</span><span style=color:#000;font-weight:700>),</span>
</span></span><span style=display:flex><span>            <span style=color:#4e9a06>&#34;accuracy&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;accuracy&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>        <span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#8f5902;font-style:italic># Log position update</span>
</span></span><span style=display:flex><span>        <span style=color:#000>local</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;position_local&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{})</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>f</span><span style=color:#4e9a06>&#34;[</span><span style=color:#4e9a06>{</span><span style=color:#000>device_id</span><span style=color:#000;font-weight:700>[:</span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#000;font-weight:700>]</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>...] Position: &#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#4e9a06>f</span><span style=color:#4e9a06>&#34;(</span><span style=color:#4e9a06>{</span><span style=color:#000>local</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;x&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;N/A&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>, </span><span style=color:#4e9a06>{</span><span style=color:#000>local</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;y&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;N/A&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>) &#34;</span>
</span></span><span style=display:flex><span>              <span style=color:#4e9a06>f</span><span style=color:#4e9a06>&#34;accuracy: </span><span style=color:#4e9a06>{</span><span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;accuracy&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;N/A&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>m&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>elif</span> <span style=color:#000>measurement_type</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;position_zone&#34;</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>payload</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;value&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>f</span><span style=color:#4e9a06>&#34;[</span><span style=color:#4e9a06>{</span><span style=color:#000>device_id</span><span style=color:#000;font-weight:700>[:</span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#000;font-weight:700>]</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>...] Entered zone: </span><span style=color:#4e9a06>{</span><span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;zone_name&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h2 id=coordinate-systems>Coordinate Systems</h2><h3 id=local-coordinates>Local Coordinates</h3><p>Local coordinates use a Cartesian system relative to a building origin:</p><ul><li><strong>X</strong>: East-West axis (positive = East)</li><li><strong>Y</strong>: North-South axis (positive = North)</li><li><strong>Z</strong>: Vertical axis (positive = Up)</li><li><strong>Units</strong>: Meters</li></ul><h3 id=global-coordinates>Global Coordinates</h3><p>Global coordinates use WGS84 (standard GPS coordinate system):</p><ul><li><strong>Format</strong>: GeoJSON Point <code>[longitude, latitude]</code></li><li><strong>Longitude</strong>: -180 to +180</li><li><strong>Latitude</strong>: -90 to +90</li></ul><div class="alert alert-info" role=alert><div class="h4 alert-heading" role=heading>Note</div><p>GeoJSON uses [longitude, latitude] order, which is the opposite of common &ldquo;lat, long&rdquo; convention.</p></div><h2 id=accuracy-considerations>Accuracy Considerations</h2><h3 id=factors-affecting-accuracy>Factors Affecting Accuracy</h3><table><thead><tr><th>Factor</th><th>Impact</th><th>Mitigation</th></tr></thead><tbody><tr><td>Locator density</td><td>Low density = lower accuracy</td><td>Deploy locators per grid recommendations</td></tr><tr><td>Obstructions</td><td>Walls/metal reduce signal</td><td>Increase locator count in obstructed areas</td></tr><tr><td>Tag battery</td><td>Low battery = less frequent updates</td><td>Monitor battery levels</td></tr><tr><td>Movement speed</td><td>Fast movement = position lag</td><td>Use prediction algorithms</td></tr></tbody></table><h3 id=accuracy-levels>Accuracy Levels</h3><table><thead><tr><th>Accuracy Range</th><th>Typical Use Case</th></tr></thead><tbody><tr><td>&lt; 1m</td><td>Desk-level tracking</td></tr><tr><td>1-3m</td><td>Room-level tracking</td></tr><tr><td>3-5m</td><td>Zone-level tracking</td></tr><tr><td>> 5m</td><td>Building/floor level</td></tr></tbody></table><h2 id=best-practices>Best Practices</h2><h3 id=1-use-appropriate-position-type>1. Use Appropriate Position Type</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#8f5902;font-style:italic># For room-level tracking, use zone positions</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>use_case</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;meeting_room_occupancy&#34;</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#000>subscribe_to</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;measurements/position_zone/#&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># For asset tracking, use precise positions</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>use_case</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;asset_tracking&#34;</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>    <span style=color:#000>subscribe_to</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;measurements/position/#&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span></code></pre></div><h3 id=2-handle-missing-data>2. Handle Missing Data</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_position</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>measurement</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>    <span style=color:#000>value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>measurement</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;value&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{})</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># Prefer local coordinates for indoor</span>
</span></span><span style=display:flex><span>    <span style=color:#000>local</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;position_local&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>local</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;local&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;x&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>local</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;x&#34;</span><span style=color:#000;font-weight:700>],</span> <span style=color:#4e9a06>&#34;y&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>local</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;y&#34;</span><span style=color:#000;font-weight:700>]}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># Fall back to global</span>
</span></span><span style=display:flex><span>    <span style=color:#000>global_pos</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;position_global&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>global_pos</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#000>coords</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>global_pos</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;coordinates&#34;</span><span style=color:#000;font-weight:700>]</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;global&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;lng&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>coords</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>],</span> <span style=color:#4e9a06>&#34;lat&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>coords</span><span style=color:#000;font-weight:700>[</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>]}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#8f5902;font-style:italic># Fall back to zone</span>
</span></span><span style=display:flex><span>    <span style=color:#000>zone</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>value</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;zone_name&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>zone</span><span style=color:#000;font-weight:700>:</span>
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>{</span><span style=color:#4e9a06>&#34;type&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;zone&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;name&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>zone</span><span style=color:#000;font-weight:700>}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#204a87;font-weight:700>None</span>
</span></span></code></pre></div><h3 id=3-filter-by-accuracy>3. Filter by Accuracy</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>is_position_reliable</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>measurement</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>max_accuracy</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>5.0</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;&#34;&#34;Check if position accuracy is acceptable.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>accuracy</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>measurement</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;value&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{})</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;accuracy&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>accuracy</span> <span style=color:#204a87;font-weight:700>is</span> <span style=color:#204a87;font-weight:700>not</span> <span style=color:#204a87;font-weight:700>None</span> <span style=color:#204a87;font-weight:700>and</span> <span style=color:#000>accuracy</span> <span style=color:#ce5c00;font-weight:700>&lt;=</span> <span style=color:#000>max_accuracy</span>
</span></span></code></pre></div><h3 id=4-aggregate-for-heat-maps>4. Aggregate for Heat Maps</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>collections</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>defaultdict</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>zone_visits</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>defaultdict</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>on_zone_message</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>device_id</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>zone_name</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>    <span style=color:#000>zone_visits</span><span style=color:#000;font-weight:700>[</span><span style=color:#000>zone_name</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>+=</span> <span style=color:#0000cf;font-weight:700>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Generate heat map data</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_heat_map</span><span style=color:#000;font-weight:700>():</span>
</span></span><span style=display:flex><span>    <span style=color:#000>total</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87>sum</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>zone_visits</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>values</span><span style=color:#000;font-weight:700>())</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000;font-weight:700>{</span>
</span></span><span style=display:flex><span>        <span style=color:#000>zone</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>count</span> <span style=color:#ce5c00;font-weight:700>/</span> <span style=color:#000>total</span> 
</span></span><span style=display:flex><span>        <span style=color:#204a87;font-weight:700>for</span> <span style=color:#000>zone</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>count</span> <span style=color:#204a87;font-weight:700>in</span> <span style=color:#000>zone_visits</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>items</span><span style=color:#000;font-weight:700>()</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>}</span>
</span></span></code></pre></div><h3 id=5-handle-stale-data>5. Handle Stale Data</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>datetime</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>datetime</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>timedelta</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>STALE_THRESHOLD</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>timedelta</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>minutes</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>is_position_current</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>measurement</span><span style=color:#000;font-weight:700>):</span>
</span></span><span style=display:flex><span>    <span style=color:#4e9a06>&#34;&#34;&#34;Check if position data is recent.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#000>measured_at</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>datetime</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>fromisoformat</span><span style=color:#000;font-weight:700>(</span>
</span></span><span style=display:flex><span>        <span style=color:#000>measurement</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;measured_at&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>replace</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Z&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;+00:00&#34;</span><span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000;font-weight:700>)</span>
</span></span><span style=display:flex><span>    <span style=color:#000>age</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>datetime</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>now</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>measured_at</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>tzinfo</span><span style=color:#000;font-weight:700>)</span> <span style=color:#ce5c00;font-weight:700>-</span> <span style=color:#000>measured_at</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>age</span> <span style=color:#ce5c00;font-weight:700>&lt;</span> <span style=color:#000>STALE_THRESHOLD</span>
</span></span></code></pre></div><h2 id=next-steps>Next Steps</h2><ul><li><a href=../measurement-types/>Measurement Types</a> - All measurement types reference</li><li><a href=../../apis/service-api/queries/>Service API Queries</a> - GraphQL query examples</li><li><a href=../../apis/stream-api/topics/>Stream API Topics</a> - MQTT topic structure</li></ul></div></main></div></div><footer class="td-footer bg-dark"><div class="container py-4"><div class=row><div class="col-12 col-md-6 text-center text-md-left"><div class=td-footer__left><span class=text-white>&copy; 2026 Haltian |
<a href=https://haltian.com/privacy class=text-white>Privacy Policy</a></span></div></div><div class="col-12 col-md-6 text-center text-md-right"><div class=td-footer__right><a class="text-white mx-2" target=_blank rel=noopener href=mailto:support@haltian.com aria-label="Contact Support"><i class="fa fa-envelope"></i>
</a><a class="text-white mx-2" target=_blank rel=noopener href=https://haltian.com aria-label="Haltian Website"><i class="fa fa-globe"></i>
</a><a class="text-white mx-2" target=_blank rel=noopener href=https://github.com/haltian aria-label=GitHub><i class="fab fa-github"></i></a></div></div></div></div></footer></div><script src=/js/main.min.8dd4d36f10f64ef5224e04ba313f8e91e183feca404406187e7d4bad9bc83b21.js integrity="sha256-jdTTbxD2TvUiTgS6MT+OkeGD/spARAYYfn1LrZvIOyE=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>